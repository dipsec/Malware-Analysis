#include <string.h>
#include "Obfuscator.h"

char * obfuscate(char *string) {
	unsigned int i = 0;

	for (i = 0; i < strlen(string); i++) {
		string[i] = rotNr(string[i]);
		string[i] = rot13(string[i]);
		string[i] = rotSpecial(string[i]);
	}

	return string;
}

char rotNr(char c) {
	if ('0' <= c && '4' >= c) {
		c += 5;
	} else if ('5' <= c && '9' >= c) {
		c -= 5;
	}

	return c;
}

char rot13(char c) {
	if (('a' <= c && 'm' >= c) || ('A' <= c && 'M' >= c)) {
		c += 13;
	} else if (('n' <= c && 'z' >= c) || ('N' <= c && 'Z' >= c)) {
		c -= 13;
	}

	return c;
}

/**
 * Changes special chars against each other
 */
char rotSpecial(char c) {
	//change pair
	if ('\\' == c) {
		c = '§';
	}
	else if ('§' == c) {
		c = '\\';
	} 

	//change pair
	if (':' == c) {
		c = '*';
	}
	else if ('*' == c) {
		c = ':';
	}

	//change pair
	if ('-' == c) {
		c = '#';
	}
	else if ('#' == c) {
		c = '-';
	}

	return c;
}